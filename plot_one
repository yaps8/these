#!/bin/bash

make clean
git checkout $1
git checkout master plot_one date pages todo_sum words_sum listTex
timeout 120s make 2>&1

if [ $? -eq 124 ]; then
  echo "ERR" 1>&2
else
  d=`./date`
  p=`./pages`
  t=`./todo_sum`
  w=`./words_sum`
  echo "d, p, t, w: "$d", "$p", "$t", "$w
  echo $d" "$p" "$t" "$w >> plot.dat
fi
